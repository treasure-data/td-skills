# Basic Journey Example
# A simple onboarding journey with one stage
# File location: ./segments/(parent-segment-name)/onboarding-journey.yml

type: journey
name: Onboarding Journey

journeys:
  - stages:
      - name: Welcome
        entry_criteria:
          name: New Customers
          segment: new-customers
        steps:
          - type: wait
            name: Wait 1 Day
            with:
              duration: 1
              unit: day  # day | week (singular only)
          - type: activation
            name: Send Welcome Email
            next: Complete  # Direct field for branching
            with:
              activation: welcome-email  # References key in activations:
          - type: end
            name: Complete
    state: draft  # Push as draft first, use simulation to validate

description: 30-day customer onboarding

reentry: no_reentry  # no_reentry | reentry_unless_goal_achieved | reentry_always

# Journey-level goal (optional)
goal:
  name: Completed Onboarding
  segment: completed-users

# Embedded segments (journey-local)
segments:
  new-customers:
    description: Customers created in last 30 days
    rule:
      type: Value
      attribute: created_at
      operator:
        type: TimeWithinPast
        value: 30
        unit: day

  completed-users:
    description: Users who completed onboarding
    rule:
      type: Value
      attribute: onboarding_completed
      operator:
        type: Equal
        value: true

# Embedded activations (optional)
activations:
  welcome-email:
    name: Welcome Email Campaign
    connection: email-connector  # From tdx connection list
    all_columns: true
    schedule:
      type: none
      timezone: UTC
    connector_config:
      mode: append
