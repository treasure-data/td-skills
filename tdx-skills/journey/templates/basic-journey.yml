# Basic Journey Example
# A simple onboarding journey with one stage

type: journey
name: Onboarding Journey
description: 30-day customer onboarding

# Embedded segments (journey-local)
segments:
  new-customers:
    description: Customers created in last 30 days
    rule:
      type: Value
      attribute: created_at
      operator:
        type: TimeWithinPast
        value: 30
        unit: day

  completed-users:
    description: Users who completed onboarding
    rule:
      type: Value
      attribute: onboarding_completed
      operator:
        type: Equal
        value: true

# Journey-level goal (optional)
goal:
  name: Completed Onboarding
  segment: completed-users

# Reentry mode: no_reentry | reentry_unless_goal_achieved | reentry_always
reentry: no_reentry

# Journey versions (unified format)
journeys:
  - state: draft  # Push as draft first, use simulation to validate
    latest: true
    stages:
      - name: Welcome
        entry_criteria:
          name: New Customers
          segment: new-customers
        steps:
          - type: wait
            name: Wait 1 Day
            with:
              duration: 1
              unit: day  # day | week
          - type: activation
            name: Send Welcome Email
            with:
              activation: welcome-email  # From tdx connection list
          - type: end
            name: Complete
